<?xml version="1.0" encoding="utf-8" ?>
<database Name="otrs">
    <TableAlter Name="link_relation">
        <IndexCreate Name="link_relation_list_source">
            <IndexColumn Name="source_object_id"/>
            <IndexColumn Name="source_key"/>
            <IndexColumn Name="state_id"/>
        </IndexCreate>
        <IndexCreate Name="link_relation_list_target">
            <IndexColumn Name="target_object_id"/>
            <IndexColumn Name="target_key"/>
            <IndexColumn Name="state_id"/>
        </IndexCreate>
    </TableAlter>

    <!-- remove column that is used nowhere -->
    <TableAlter Name="auto_response">
        <ColumnDrop Name="text2"/>
    </TableAlter>

    <!-- notification_event_message -->
    <TableCreate Name="notification_event_message">
        <Column Name="id" Required="true" PrimaryKey="true" AutoIncrement="true" Type="INTEGER"/>
        <Column Name="notification_id" Required="true" Type="INTEGER"/>
        <Column Name="subject" Required="true" Size="200" Type="VARCHAR"/>
        <Column Name="text" Required="true" Size="4000" Type="VARCHAR"/>
        <Column Name="content_type" Required="true" Size="250" Type="VARCHAR"/>
        <Column Name="language" Required="true" Size="60" Type="VARCHAR"/>
        <ForeignKey ForeignTable="notification_event">
            <Reference Foreign="id" Local="notification_id"/>
        </ForeignKey>
        <Index Name="notification_event_message_notification_id">
            <IndexColumn Name="notification_id"/>
        </Index>
        <Index Name="notification_event_message_language">
            <IndexColumn Name="language"/>
        </Index>
        <Unique Name="notification_event_message_notification_id_language">
            <UniqueColumn Name="notification_id"/>
            <UniqueColumn Name="language"/>
        </Unique>
    </TableCreate>

</database>
